<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏°‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Styles */
        body {
            font-family: 'Sarabun', sans-serif;
            color: #333;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background: linear-gradient(-45deg, #f7f9fc, #f0f4f8, #e0e7f1);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            max-width: 600px;
            width: 90%;
            padding: 30px;
            background: #fff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-radius: 15px;
            text-align: center;
        }
        h1 {
            color: #4a148c; /* ‡∏°‡πà‡∏ß‡∏á‡πÄ‡∏Ç‡πâ‡∏° */
            font-weight: 700;
            font-size: 2em;
            margin-bottom: 5px;
        }
        .subtitle {
            color: #7b1fa2; /* ‡∏°‡πà‡∏ß‡∏á‡∏Å‡∏•‡∏≤‡∏á */
            margin-bottom: 25px;
            font-weight: 600;
        }
        /* LIFF Profile Display */
        #profile-info-display {
            display: none; 
            align-items: center;
            justify-content: center;
            padding: 15px;
            margin: 20px 0;
            background-color: #e8f5e9; /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏≠‡πà‡∏≠‡∏ô (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à) */
            border: 2px solid #4CAF50;
            border-radius: 10px;
        }
        #profile-picture {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #4CAF50;
        }
        #profile-name {
            font-weight: 700;
            color: #2e7d32; /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏° */
            font-size: 1em;
        }
        /* QR Code Section */
        #qr-section {
            padding: 20px;
            border: 1px dashed #ccc;
            border-radius: 8px;
            margin-top: 25px;
        }
        #qr-code-img {
            max-width: 100%;
            width: 250px;
            height: auto;
            border: 4px solid #ffd54f; /* ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏ó‡∏≠‡∏á */
            border-radius: 5px;
            margin: 15px 0;
        }
        .instruction {
            color: #666;
            margin-bottom: 15px;
        }
        .liff-info {
            padding: 10px;
            background-color: #ffecb3; /* ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏≠‡πà‡∏≠‡∏ô */
            border-radius: 5px;
            color: #e65100;
            font-weight: 600;
        }
        /* Birthday Style (NEW) */
        .birthday-banner {
            background-color: #ffe0b2;
            color: #e65100;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-weight: 700;
            border: 1px solid #ffb74d;
        }
        /* Complete Button Style */
        .complete-btn {
            background-color: #4a148c; 
            color: white; 
            padding: 12px 25px; 
            border: none; 
            border-radius: 50px; 
            margin-top: 20px; 
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1em;
            transition: background-color 0.3s, transform 0.2s;
        }
        .complete-btn:hover {
            background-color: #6a1b9a;
            transform: translateY(-1px);
        }
        /* Modal for Thank You (NEW) */
        .thank-you-modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4); 
        }
        .modal-content {
            background-color: #fff;
            margin: 15% auto; 
            padding: 30px;
            border-radius: 10px;
            width: 80%; 
            max-width: 400px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s;
        }
        .modal-img {
            width: 150px;
            height: auto;
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid #6a1b9a;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üíµ ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏°</h1>
        <p class="subtitle">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏°‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£</p>
        
        <div class="birthday-banner" id="birthday-message" style="display: none;">
            üéÇ ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÇ‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤ ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô üéÇ
        </div>

        <div class="liff-info" id="login-message">
            ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö LINE LIFF ‡πÅ‡∏•‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô...
        </div>

        <div id="profile-info-display">
            <img id="profile-picture" src="" alt="Profile Picture">
            <span>‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÇ‡∏î‡∏¢: <span id="profile-name"></span></span>
        </div>

        <div id="qr-section">
            <h2 style="color: #4a148c;">‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï</h2>
            <p class="instruction">‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏ô‡∏µ‡πâ</p>
            
            <img id="qr-code-img" src="https://i.postimg.cc/15TYfnWw/qr.jpg" alt="QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô">
            
            <p style="font-weight: bold; color: #4CAF50;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏™‡πà‡∏á‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö</p>

            <button onclick="showThankYouModal()" class="complete-btn">
                ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô! (‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà)
            </button>
        </div>

    </div>
    
    <div id="thankYouModal" class="thank-you-modal">
        <div class="modal-content">
            <img class="modal-img" src="‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì.gif" alt="‡∏£‡∏π‡∏õ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï">
            <h2 style="color: #4a148c; margin-top: 0;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≤‡∏Å‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á!</h2>
            <p style="color: #7b1fa2; font-weight: 600;">"‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤ ! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å ‡πÜ ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö"</p>
            <p>‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ üòä</p>
            
            <button onclick="redirectToWishPage()" class="complete-btn" style="background-color: #4CAF50;">
                ‡πÑ‡∏õ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£
            </button>
        </div>
    </div>
    <script>
        // ** CONFIGURATION **
        const liffId = '2008162847-GV9l2wmz'; 
        // URL ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å (‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏ß‡∏¢‡∏û‡∏£)
        const wishPageUrl = 'https://wish-website.onrender.com'; 
        // ** END CONFIGURATION **
        
        // DOM Elements
        const profileDisplay = document.getElementById('profile-info-display');
        const loginMessage = document.getElementById('login-message');
        const thankYouModal = document.getElementById('thankYouModal');

        // ===================================
        // üöÄ LIFF Initialization & Login Logic
        // ===================================

        async function initializeLiff() {
            try {
                // 1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF
                await liff.init({ liffId: liffId });
                loginMessage.textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LIFF ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à...';

                // 2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
                if (!liff.isLoggedIn()) {
                    loginMessage.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô...';
                    liff.login();
                } else {
                    // 3. ‡∏î‡∏∂‡∏á Profile ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    const profile = await liff.getProfile();

                    document.getElementById('profile-picture').src = profile.pictureUrl || 'https://via.placeholder.com/40'; 
                    document.getElementById('profile-name').textContent = profile.displayName;
                    profileDisplay.style.display = 'flex';
                    loginMessage.style.display = 'none'; 
                    
                    console.log('User logged in successfully:', profile.userId);
                }
            } catch (err) {
                console.error('LIFF initialization failed', err);
                loginMessage.innerHTML = '<p style="color: #f44336;">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LIFF ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ LINE</p>';
            }
        }
        
        // ===================================
        // ‚ú® NEW: Modal and Navigation Logic
        // ===================================
        
        function showThankYouModal() {
            thankYouModal.style.display = 'block';
        }
        
        function redirectToWishPage() {
            // ‡∏û‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ß‡∏¢‡∏û‡∏£
            window.location.href = wishPageUrl;
            
            // ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô LIFF ‡πÉ‡∏´‡πâ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠
            if (liff.isInClient()) {
                liff.closeWindow();
            }
        }
        
        // ===================================
        // üóìÔ∏è NEW: Birthday Logic
        // ===================================

        function checkBirthday() {
            const today = new Date();
            const todayMonth = today.getMonth() + 1; // getMonth() returns 0-11
            const todayDate = today.getDate();
            
            // ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î: 29/09 (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô 9 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 29)
            if (todayMonth === 9 && todayDate === 29) { 
                document.getElementById('birthday-message').style.display = 'block';
            }
        }

        // ===================================
        // ‚¨áÔ∏è Main Entry Point
        // ===================================
        
        document.addEventListener('DOMContentLoaded', () => {
            checkBirthday(); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô
            
            if (typeof liff !== 'undefined') {
                initializeLiff();
            } else {
                // Mockup Logic ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏õ‡∏Å‡∏ï‡∏¥
                loginMessage.innerHTML = '<p style="color: #666;">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö LIFF SDK ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</p>';
                document.getElementById('profile-info-display').style.display = 'flex';
                document.getElementById('profile-picture').src = 'https://via.placeholder.com/40';
                document.getElementById('profile-name').textContent = 'Test User (Mock)';
            }
        });

    </script>
</body>

</html>
